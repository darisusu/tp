@startuml
scale 1.75

skinparam classFontSize 18
skinparam arrowFontSize 16

Interface "<<interface>>\nModel" as Model
Class ModelManager
Class AddressBook
Interface "<<interface>>\nReadOnlyAddressBook" as ReadOnlyAddressBook
Class UserPrefs
Interface "<<interface>>\nReadOnlyUserPrefs" as ReadOnlyUserPrefs
Class UniquePersonList
Class Person

Class Tag

Class Session {
    -SessionType type
    -LocalDateTime oneOffDateTime
    -int dayOfMonth
    -LocalTime time
    -List<RecurringSlot> recurringSlots
    +static fromString(raw)
    +boolean conflictsWith(Session)
}

Class "Session::RecurringSlot" as SessionRecurringSlot {
    -DayOfWeek day
    -LocalTime start
    -LocalTime end
}

Enum SessionType {
    ONE_OFF
    WEEKLY
    BIWEEKLY
    MONTHLY
}

Class ConflictingSessionException

ModelManager ..|> Model
ModelManager *--> AddressBook
ModelManager *--> UserPrefs
AddressBook ..|> ReadOnlyAddressBook
UserPrefs ..|> ReadOnlyUserPrefs
AddressBook *--> UniquePersonList
UniquePersonList --> "~* all" Person
UniquePersonList ..> Session : checks conflicts
UniquePersonList ..> ConflictingSessionException : <<throws>>
Person *--> Name
Person *--> Phone
Person *--> Email
Person *--> Address
Person *--> Goal
Person *--> Height
Person *--> Weight
Person *--> Age
Person *--> Gender
Person *--> Deadline
Person *--> Paid
Person *--> Bodyfat
Person *--> "*" Tag
Person *--> Session : session
Session *--> SessionRecurringSlot : recurringSlots
Session --> SessionType : type
ModelManager --> "~* filtered" Person

Address -[hidden]right-> Email

note right of Session
  Supports multi-slot WEEKLY/BIWEEKLY sessions
  and prevents overlapping recurring slots.
end note
@enduml
